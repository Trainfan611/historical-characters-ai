# üí∞ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–µ–π—Ä–æ–Ω–∫–∏

## üìä –¢–µ–∫—É—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (–¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)

–î–ª—è **16,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å**:
- **Perplexity API** (–ø–æ–∏—Å–∫): $0.001 √ó 16,000 = **$16/–¥–µ–Ω—å**
- **OpenAI API** (–ø—Ä–æ–º–ø—Ç): $0.01 √ó 16,000 = **$160/–¥–µ–Ω—å**
- **Replicate API** (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, flux-dev): $0.01 √ó 16,000 = **$160/–¥–µ–Ω—å**

**–ò—Ç–æ–≥–æ: ~$336/–¥–µ–Ω—å = ~$10,080/–º–µ—Å—è—Ü**

---

## ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

### 1. Replicate: flux-dev ‚Üí flux-schnell
- **–ë—ã–ª–æ:** $0.01/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- **–°—Ç–∞–ª–æ:** $0.002/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- **–≠–∫–æ–Ω–æ–º–∏—è:** 80% ($160/–¥–µ–Ω—å ‚Üí $32/–¥–µ–Ω—å)

### 2. OpenAI ‚Üí Google Gemini (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–ë—ã–ª–æ:** $0.01/–ø—Ä–æ–º–ø—Ç (OpenAI)
- **–°—Ç–∞–ª–æ:** $0.00015/–ø—Ä–æ–º–ø—Ç (Gemini)
- **–≠–∫–æ–Ω–æ–º–∏—è:** 98.5% ($160/–¥–µ–Ω—å ‚Üí $2.4/–¥–µ–Ω—å)

---

## üíµ –ù–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–æ–ª—å–∫–æ Replicate –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **Perplexity API** (–ø–æ–∏—Å–∫): $16/–¥–µ–Ω—å
- **OpenAI API** (–ø—Ä–æ–º–ø—Ç): $160/–¥–µ–Ω—å
- **Replicate API** (flux-schnell): $32/–¥–µ–Ω—å

**–ò—Ç–æ–≥–æ: ~$208/–¥–µ–Ω—å = ~$6,240/–º–µ—Å—è—Ü**
**–≠–∫–æ–Ω–æ–º–∏—è: ~$128/–¥–µ–Ω—å = ~$3,840/–º–µ—Å—è—Ü**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (Replicate + Gemini)
- **Perplexity API** (–ø–æ–∏—Å–∫): $16/–¥–µ–Ω—å
- **Google Gemini API** (–ø—Ä–æ–º–ø—Ç): $2.4/–¥–µ–Ω—å
- **Replicate API** (flux-schnell): $32/–¥–µ–Ω—å

**–ò—Ç–æ–≥–æ: ~$50.4/–¥–µ–Ω—å = ~$1,512/–º–µ—Å—è—Ü**
**–≠–∫–æ–Ω–æ–º–∏—è: ~$285.6/–¥–µ–Ω—å = ~$8,568/–º–µ—Å—è—Ü** üéâ

---

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: Replicate –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (—É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞)
‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ –≤ `lib/ai/openrouter.ts`:
- `flux-dev` ‚Üí `flux-schnell`
- –≠–∫–æ–Ω–æ–º–∏—è 80% –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –®–∞–≥ 2: Gemini –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 2.1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:
```bash
npm install @google/generative-ai
```

#### 2.2. –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á Gemini:
1. –ó–∞–π–¥–∏ –Ω–∞ https://ai.google.dev/
2. –ù–∞–∂–º–∏ "Get API Key"
3. –°–æ–∑–¥–∞–π –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud
4. –°–∫–æ–ø–∏—Ä—É–π API –∫–ª—é—á

#### 2.3. –î–æ–±–∞–≤–∏—Ç—å –≤ Railway Variables:
```
GEMINI_API_KEY=your_gemini_api_key_here
```

#### 2.4. –ö–æ–¥ —É–∂–µ –≥–æ—Ç–æ–≤!
‚úÖ –§–∞–π–ª `lib/ai/gemini.ts` —Å–æ–∑–¥–∞–Ω
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ OpenAI –µ—Å–ª–∏ Gemini –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
‚úÖ –ò–º–ø–æ—Ä—Ç –æ–±–Ω–æ–≤–ª—ë–Ω –≤ `app/api/generate/route.ts`

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞

### Replicate flux-schnell vs flux-dev:
- **–ö–∞—á–µ—Å—Ç–≤–æ:** –û—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ, –∏–Ω–æ–≥–¥–∞ –¥–∞–∂–µ –ª—É—á—à–µ
- **–°–∫–æ—Ä–æ—Å—Ç—å:** –ë—ã—Å—Ç—Ä–µ–µ (4 —à–∞–≥–∞ vs 28 —à–∞–≥–æ–≤)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** –í 5 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ

### Google Gemini vs OpenAI:
- **–ö–∞—á–µ—Å—Ç–≤–æ:** –°–æ–ø–æ—Å—Ç–∞–≤–∏–º–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤
- **–°–∫–æ—Ä–æ—Å—Ç—å:** –ë—ã—Å—Ç—Ä–µ–µ
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** –í 66 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ

---

## üîÑ Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
1. **Gemini** (–µ—Å–ª–∏ `GEMINI_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω) ‚Üí –¥–µ—à–µ–≤–ª–µ
2. **OpenAI** (–µ—Å–ª–∏ Gemini –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω) ‚Üí –¥–æ—Ä–æ–∂–µ, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
1. **Replicate flux-schnell** ‚Üí –¥–µ—à–µ–≤–ª–µ –∏ –±—ã—Å—Ç—Ä–µ–µ
2. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω flux-dev ‚Üí –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –≤ –∫–æ–¥–µ

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –°–¥–µ–ª–∞—Ç—å —Å—Ä–∞–∑—É:
1. **Replicate flux-schnell** - —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ, —ç–∫–æ–Ω–æ–º–∏—è 80%
2. **Gemini API** - –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ 98.5% –Ω–∞ –ø—Ä–æ–º–ø—Ç–∞—Ö

### üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- **–¢–µ–∫—É—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:** ~$336/–¥–µ–Ω—å
- **–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** ~$50/–¥–µ–Ω—å
- **–≠–∫–æ–Ω–æ–º–∏—è:** ~$285/–¥–µ–Ω—å = **~$8,568/–º–µ—Å—è—Ü**

---

## üõ†Ô∏è –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### –í–µ—Ä–Ω—É—Ç—å flux-dev:
–í `lib/ai/openrouter.ts` –∏–∑–º–µ–Ω–∏—Ç—å:
```typescript
version: 'black-forest-labs/flux-dev', // –≤–º–µ—Å—Ç–æ flux-schnell
```

### –í–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ OpenAI:
–í `app/api/generate/route.ts` –∏–∑–º–µ–Ω–∏—Ç—å:
```typescript
import { generateImagePrompt } from '@/lib/ai/openai'; // –≤–º–µ—Å—Ç–æ gemini
```

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `GEMINI_API_KEY` - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenAI.

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **Perplexity** –æ—Å—Ç–∞–≤–ª–µ–Ω –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π - —É–∂–µ —Å–∞–º—ã–π –¥–µ—à—ë–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–µ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ö–∞—á–µ—Å—Ç–≤–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–µ —É—Ö—É–¥—à–∞–µ—Ç—Å—è
